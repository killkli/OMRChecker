# ç’°å¢ƒè¨­å®šèªªæ˜

æœ¬å°ˆæ¡ˆä½¿ç”¨ [uv](https://github.com/astral-sh/uv) é€²è¡Œ Python ç’°å¢ƒå’Œä¾è³´ç®¡ç†ï¼Œç¢ºä¿åœ¨ä»»ä½•æ©Ÿå™¨ä¸Šéƒ½èƒ½å¿«é€Ÿä¸”ä¸€è‡´åœ°å»ºç«‹é–‹ç™¼ç’°å¢ƒã€‚

## ğŸ“‹ ç³»çµ±éœ€æ±‚

- **Python**: 3.12 æˆ–æ›´é«˜ç‰ˆæœ¬
- **uv**: æœ€æ–°ç‰ˆæœ¬ï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰
- **ä½œæ¥­ç³»çµ±**: macOSã€Linux æˆ– Windows

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ uv

#### macOS / Linux
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

#### Windows
```powershell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

#### ä½¿ç”¨ pipï¼ˆæ›¿ä»£æ–¹æ¡ˆï¼‰
```bash
pip install uv
```

### 2. Clone å°ˆæ¡ˆ
```bash
git clone https://github.com/Udayraj123/OMRChecker.git
cd OMRChecker
```

### 3. å»ºç«‹è™›æ“¬ç’°å¢ƒä¸¦å®‰è£ä¾è³´

**åªéœ€ä¸€å€‹æŒ‡ä»¤ï¼**
```bash
uv sync
```

é€™å€‹æŒ‡ä»¤æœƒï¼š
- âœ… è‡ªå‹•åµæ¸¬ä¸¦ä½¿ç”¨ Python 3.12ï¼ˆæ ¹æ“š `.python-version`ï¼‰
- âœ… å»ºç«‹è™›æ“¬ç’°å¢ƒåœ¨ `.venv/` ç›®éŒ„
- âœ… å®‰è£æ‰€æœ‰å°ˆæ¡ˆä¾è³´ï¼ˆæ ¹æ“š `pyproject.toml`ï¼‰
- âœ… å®‰è£é–‹ç™¼ä¾è³´ï¼ˆblack, flake8, pytest ç­‰ï¼‰
- âœ… ç”¢ç”Ÿ `uv.lock` é–å®šæª”æ¡ˆï¼ˆç¢ºä¿ä¾è³´ç‰ˆæœ¬ä¸€è‡´ï¼‰

### 4. å•Ÿå‹•è™›æ“¬ç’°å¢ƒ

#### macOS / Linux
```bash
source .venv/bin/activate
```

#### Windows
```powershell
.venv\Scripts\activate
```

### 5. é©—è­‰å®‰è£

```bash
# æª¢æŸ¥ Python ç‰ˆæœ¬
python --version
# æ‡‰è©²é¡¯ç¤ºï¼šPython 3.12.x

# æª¢æŸ¥å·²å®‰è£çš„å¥—ä»¶
uv pip list

# æ¸¬è©¦ Gradio ç•Œé¢
cd frontend
python app.py
```

ç€è¦½å™¨é–‹å•Ÿï¼šhttp://localhost:7860

---

## ğŸ“¦ ä¾è³´ç®¡ç†

### æ–°å¢ä¾è³´å¥—ä»¶

**æ–¹æ³• 1ï¼šä½¿ç”¨ uv addï¼ˆæ¨è–¦ï¼‰**
```bash
# æ–°å¢æ­£å¼ä¾è³´
uv add package-name

# æ–°å¢é–‹ç™¼ä¾è³´
uv add --dev package-name

# æ–°å¢ç‰¹å®šç‰ˆæœ¬
uv add "package-name>=1.0.0"
```

**æ–¹æ³• 2ï¼šæ‰‹å‹•ç·¨è¼¯ pyproject.toml**
1. ç·¨è¼¯ `pyproject.toml`ï¼Œåœ¨ `dependencies` æˆ– `dev-dependencies` åŠ å…¥å¥—ä»¶
2. åŸ·è¡Œ `uv sync` æ›´æ–°ç’°å¢ƒ

### æ›´æ–°ä¾è³´

```bash
# æ›´æ–°æ‰€æœ‰å¥—ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬
uv sync --upgrade

# æ›´æ–°ç‰¹å®šå¥—ä»¶
uv add --upgrade package-name
```

### ç§»é™¤ä¾è³´

```bash
uv remove package-name
```

---

## ğŸ”§ å¸¸ç”¨æŒ‡ä»¤

### ç’°å¢ƒç®¡ç†

```bash
# é‡æ–°åŒæ­¥ç’°å¢ƒï¼ˆå®‰è£ç¼ºå°‘çš„ä¾è³´ï¼‰
uv sync

# æ¸…ç†ä¸¦é‡å»ºç’°å¢ƒ
rm -rf .venv uv.lock
uv sync

# åªå®‰è£æ­£å¼ä¾è³´ï¼ˆä¸å«é–‹ç™¼ä¾è³´ï¼‰
uv sync --no-dev
```

### åŸ·è¡ŒæŒ‡ä»¤

```bash
# åœ¨è™›æ“¬ç’°å¢ƒä¸­åŸ·è¡Œ Python
uv run python script.py

# åŸ·è¡Œ Gradio ç•Œé¢ï¼ˆä¸éœ€è¦ activateï¼‰
uv run python frontend/app.py

# åŸ·è¡Œæ¸¬è©¦
uv run pytest

# æ ¼å¼åŒ–ç¨‹å¼ç¢¼
uv run black .
uv run isort .
```

### å¥—ä»¶ç®¡ç†

```bash
# åˆ—å‡ºå·²å®‰è£å¥—ä»¶
uv pip list

# æª¢æŸ¥å¥—ä»¶è³‡è¨Š
uv pip show package-name

# æœå°‹å¥—ä»¶
uv pip search package-name

# åŒ¯å‡ºä¾è³´æ¸…å–®
uv pip freeze > requirements.txt
```

---

## ğŸ“ å°ˆæ¡ˆæª”æ¡ˆèªªæ˜

### pyproject.toml
- å°ˆæ¡ˆé…ç½®æª”æ¡ˆï¼ˆPEP 621 æ¨™æº–ï¼‰
- å®šç¾©å°ˆæ¡ˆåç¨±ã€ç‰ˆæœ¬ã€ä¾è³´ç­‰
- åŒ…å« blackã€isortã€pytest ç­‰å·¥å…·è¨­å®š

### .python-version
- æŒ‡å®šå°ˆæ¡ˆä½¿ç”¨çš„ Python ç‰ˆæœ¬ï¼ˆ3.12ï¼‰
- uv æœƒè‡ªå‹•ä½¿ç”¨æ­¤ç‰ˆæœ¬

### uv.lock
- ä¾è³´é–å®šæª”æ¡ˆï¼ˆé¡ä¼¼ package-lock.jsonï¼‰
- ç¢ºä¿æ‰€æœ‰æ©Ÿå™¨ä½¿ç”¨ç›¸åŒçš„ä¾è³´ç‰ˆæœ¬
- **æ‡‰è©² commit åˆ° git**

### .venv/
- è™›æ“¬ç’°å¢ƒç›®éŒ„
- ç”± `.gitignore` æ’é™¤ï¼ˆä¸ commitï¼‰
- å¯ä»¥éš¨æ™‚åˆªé™¤ä¸¦ç”¨ `uv sync` é‡å»º

---

## ğŸ› ç–‘é›£æ’è§£

### å•é¡Œ 1ï¼šæ‰¾ä¸åˆ° Python 3.12

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
error: No interpreter found for Python 3.12
```

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# å®‰è£ Python 3.12
# macOS (ä½¿ç”¨ Homebrew)
brew install python@3.12

# Ubuntu/Debian
sudo apt install python3.12

# æˆ–è®“ uv è‡ªå‹•ä¸‹è¼‰
uv python install 3.12
```

### å•é¡Œ 2ï¼šuv sync å¤±æ•—

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# æ¸…ç†å¿«å–
uv cache clean

# åˆªé™¤èˆŠç’°å¢ƒé‡æ–°åŒæ­¥
rm -rf .venv uv.lock
uv sync
```

### å•é¡Œ 3ï¼šå¥—ä»¶ç‰ˆæœ¬è¡çª

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# æ›´æ–° uv.lock
uv lock --upgrade

# é‡æ–°åŒæ­¥
uv sync
```

### å•é¡Œ 4ï¼šä¸­æ–‡å­—é«”å•é¡Œ

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# è¤‡è£½ä¸­æ–‡å­—é«”åˆ°å°ˆæ¡ˆï¼ˆåƒè€ƒ fonts/README.mdï¼‰
cp ~/Library/Fonts/edukai-4.0.ttf fonts/TW-Kai.ttf
```

---

## ğŸ”„ å¾èˆŠç’°å¢ƒé·ç§»

### å¾ pip + requirements.txt é·ç§»

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ pip å’Œ `requirements.txt`ï¼š

```bash
# 1. åœç”¨èˆŠç’°å¢ƒ
deactivate

# 2. åˆªé™¤èˆŠ venvï¼ˆå¯é¸ï¼‰
rm -rf venv/

# 3. ä½¿ç”¨ uv å»ºç«‹æ–°ç’°å¢ƒ
uv sync

# 4. å•Ÿå‹•æ–°ç’°å¢ƒ
source .venv/bin/activate
```

èˆŠçš„ `requirements.txt` å·²ç¶“è¢«æ•´åˆåˆ° `pyproject.toml` ä¸­ã€‚

---

## ğŸ’¡ æœ€ä½³å¯¦è¸

1. **æ°¸é ä½¿ç”¨ `uv sync`**
   - Clone å°ˆæ¡ˆå¾Œç¬¬ä¸€ä»¶äº‹ï¼š`uv sync`
   - åˆ‡æ›åˆ†æ”¯å¾Œï¼š`uv sync`
   - Pull æœ€æ–°ç¨‹å¼ç¢¼å¾Œï¼š`uv sync`

2. **Commit `uv.lock`**
   - ç¢ºä¿åœ˜éšŠä½¿ç”¨ç›¸åŒçš„ä¾è³´ç‰ˆæœ¬
   - é¿å…ã€Œåœ¨æˆ‘çš„æ©Ÿå™¨ä¸Šå¯ä»¥åŸ·è¡Œã€çš„å•é¡Œ

3. **ä½¿ç”¨ `uv run`**
   - ä¸éœ€è¦æ‰‹å‹• activate è™›æ“¬ç’°å¢ƒ
   - è‡ªå‹•ä½¿ç”¨å°ˆæ¡ˆçš„è™›æ“¬ç’°å¢ƒ

4. **å®šæœŸæ›´æ–°ä¾è³´**
   ```bash
   uv sync --upgrade
   ```

5. **é–‹ç™¼å‰æª¢æŸ¥ç’°å¢ƒ**
   ```bash
   uv sync  # ç¢ºä¿ç’°å¢ƒæ˜¯æœ€æ–°çš„
   uv run pytest  # åŸ·è¡Œæ¸¬è©¦ç¢ºèªä¸€åˆ‡æ­£å¸¸
   ```

---

## ğŸš€ é€²éšç”¨æ³•

### å¤šå€‹ Python ç‰ˆæœ¬

```bash
# å®‰è£ç‰¹å®šç‰ˆæœ¬
uv python install 3.11 3.12 3.13

# ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬
uv venv --python 3.11

# åˆ‡æ›ç‰ˆæœ¬
echo "3.11" > .python-version
uv sync
```

### è‡ªè¨‚è™›æ“¬ç’°å¢ƒä½ç½®

```bash
# ä½¿ç”¨ä¸åŒçš„ venv ç›®éŒ„
uv venv custom-venv
source custom-venv/bin/activate
uv sync
```

### CI/CD æ•´åˆ

```yaml
# GitHub Actions ç¯„ä¾‹
- name: Setup uv
  run: curl -LsSf https://astral.sh/uv/install.sh | sh

- name: Install dependencies
  run: uv sync --no-dev

- name: Run tests
  run: uv run pytest
```

---

## ğŸ“š åƒè€ƒè³‡æº

- **uv å®˜æ–¹æ–‡ä»¶**: https://docs.astral.sh/uv/
- **uv GitHub**: https://github.com/astral-sh/uv
- **Python æ‰“åŒ…æŒ‡å—**: https://packaging.python.org/
- **PEP 621**: https://peps.python.org/pep-0621/

---

## âœ… æª¢æŸ¥æ¸…å–®

å®‰è£å®Œæˆå¾Œï¼Œç¢ºèªä»¥ä¸‹é …ç›®ï¼š

- [ ] `uv --version` æœ‰è¼¸å‡ºç‰ˆæœ¬è™Ÿ
- [ ] `python --version` é¡¯ç¤º Python 3.12.x
- [ ] `uv pip list` é¡¯ç¤ºæ‰€æœ‰å¥—ä»¶
- [ ] `.venv/` ç›®éŒ„å­˜åœ¨
- [ ] `uv.lock` æª”æ¡ˆå­˜åœ¨
- [ ] `uv run python frontend/app.py` å¯ä»¥å•Ÿå‹• Gradio ç•Œé¢
- [ ] http://localhost:7860 å¯ä»¥é–‹å•Ÿç¶²é 

å…¨éƒ¨æ‰“å‹¾è¡¨ç¤ºç’°å¢ƒè¨­å®šæˆåŠŸï¼ğŸ‰
