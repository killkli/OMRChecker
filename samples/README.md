# Sample Files

此目錄包含用於測試 OMR Checker 的範例檔案。

## 📁 檔案結構

```
samples/
├── README.md                    # 本檔案
├── templates/                   # 範例模板
│   ├── standard-50q.json       # 標準 50 題模板
│   └── custom-100q.json        # 自訂 100 題模板
└── images/                      # 範例答案卡影像
    ├── sample-omr-1.jpg        # 範例 1 (清晰、完整填塗)
    ├── sample-omr-2.jpg        # 範例 2 (部分未填塗)
    └── sample-omr-3.jpg        # 範例 3 (有錯誤答案)
```

## 🎯 範例模板說明

### 1. standard-50q.json

**描述**: 標準 50 題測驗模板

**規格**:
- 總題數: 50 題
- 選項: A, B, C, D (4 選項)
- 每列題數: 5 題
- 總列數: 10 列

**適用情境**:
- 一般小考
- 期中/期末考
- 學力測驗

**模板內容範例**:
```json
{
  "name": "標準 50 題測驗",
  "totalQuestions": 50,
  "questionsPerRow": 5,
  "options": ["A", "B", "C", "D"],
  "layout": {
    "bubbleRadius": 12,
    "horizontalSpacing": 60,
    "verticalSpacing": 50
  },
  "correctAnswers": {
    "1": "A", "2": "B", "3": "C", ...
  }
}
```

### 2. custom-100q.json

**描述**: 大型考試 100 題模板

**規格**:
- 總題數: 100 題
- 選項: A, B, C, D, E (5 選項)
- 每列題數: 5 題
- 總列數: 20 列

**適用情境**:
- 大學入學考試
- 證照考試
- 全國性測驗

---

## 🖼️ 範例影像說明

### sample-omr-1.jpg

**描述**: 理想狀態的答案卡

**特點**:
- ✅ 四個角點清晰可見
- ✅ 所有答案都有填塗
- ✅ 填塗飽滿且均勻
- ✅ 無摺痕或汙損
- ✅ 光線均勻，無陰影

**預期結果**:
- 辨識率: 100%
- 評分: 85/100 (假設有 15 題答錯)

**使用方法**:
1. 開啟 OMR Checker
2. 上傳此影像
3. 查看完整的處理流程
4. 驗證辨識結果是否正確

---

### sample-omr-2.jpg

**描述**: 部分未填塗的答案卡

**特點**:
- ✅ 四個角點可見
- ⚠️ 有 10 題未填塗
- ✅ 已填塗的答案清晰
- ✅ 影像品質良好

**預期結果**:
- 辨識率: 100%
- 未填塗題數: 10 題
- 評分: 70/90 (僅計算已作答題目)

**測試目的**:
- 驗證系統對未填塗答案的處理
- 測試評分邏輯是否正確

---

### sample-omr-3.jpg

**描述**: 含有錯誤答案的答案卡

**特點**:
- ✅ 所有題目都有填塗
- ⚠️ 約 30% 答案錯誤
- ✅ 影像品質清晰

**預期結果**:
- 辨識率: 100%
- 答對率: 70%
- 評分: 70/100

**測試目的**:
- 驗證錯誤答案的標示（紅色）
- 測試評分計算的準確性
- 檢查 CSV/JSON 匯出格式

---

## 📋 如何使用範例檔案

### 基本測試流程

1. **開啟 OMR Checker**
   ```bash
   # 如果使用本地開發伺服器
   python -m http.server 8000
   # 或使用 npm serve
   npx serve .
   ```

2. **測試影像辨識**
   - 上傳 `sample-omr-1.jpg`
   - 等待處理完成
   - 檢查各個處理步驟的結果
   - 驗證最終評分是否正確

3. **測試匯出功能**
   - 點擊「匯出 CSV」
   - 用 Excel 開啟檢查格式
   - 點擊「匯出 JSON」
   - 用文字編輯器檢查 JSON 結構

4. **測試儲存功能**
   - 點擊「儲存結果」
   - 點擊「查看歷史記錄」
   - 驗證記錄是否正確儲存

5. **測試批次匯出**
   - 處理並儲存 3 張範例影像
   - 開啟歷史記錄
   - 點擊「匯出 CSV」或「匯出 JSON」
   - 驗證批次匯出格式

### 進階測試場景

#### 場景 1: 不同光線條件

**目的**: 測試系統對不同光線的適應能力

**步驟**:
1. 使用相同答案卡，在不同光線下拍攝
2. 分別上傳並比較辨識結果
3. 記錄哪種光線條件效果最佳

**預期**:
- 自然光、均勻照明效果最佳
- 強烈陰影或反光會降低辨識率

#### 場景 2: 不同解析度

**目的**: 找出最佳解析度設定

**步驟**:
1. 將範例影像調整為不同解析度（800px, 1500px, 3000px 寬度）
2. 分別測試辨識效果
3. 記錄處理時間和準確率

**預期**:
- 800px: 辨識率可能降低
- 1500px: 最佳平衡點
- 3000px: 準確但處理較慢

#### 場景 3: 壓力測試

**目的**: 測試系統穩定性

**步驟**:
1. 連續處理 10-20 張影像
2. 觀察記憶體使用情況
3. 驗證是否有記憶體洩漏

**預期**:
- 記憶體使用穩定
- 處理速度保持一致
- 無當機或錯誤

---

## 🎨 建立自己的測試影像

### 準備工作

1. **列印答案卡**
   - 使用提供的模板 PDF（如有）
   - 或參考現有格式自行設計

2. **填塗答案**
   - 使用 2B 鉛筆
   - 填塗飽滿均勻
   - 避免超出圓圈範圍

3. **拍攝/掃描**
   - 使用良好光線
   - 保持答案卡平整
   - 確保四個角點都在畫面內
   - 建議解析度: 1500-2000px 寬度

### 影像品質檢查清單

- [ ] 四個角點清晰可見
- [ ] 無明顯陰影
- [ ] 無反光
- [ ] 填塗清晰可辨
- [ ] 無摺痕或汙損
- [ ] 解析度足夠（最少 1200px 寬）
- [ ] 檔案格式為 JPG 或 PNG
- [ ] 檔案大小不超過 10MB

---

## 🔧 自訂模板指南

### 模板 JSON 結構

```json
{
  "name": "模板名稱",
  "description": "模板說明",
  "version": "1.0",
  "totalQuestions": 50,
  "questionsPerRow": 5,
  "options": ["A", "B", "C", "D"],
  "layout": {
    "bubbleRadius": 12,
    "horizontalSpacing": 60,
    "verticalSpacing": 50,
    "marginTop": 100,
    "marginLeft": 50
  },
  "correctAnswers": {
    "1": "A",
    "2": "B",
    "3": "C",
    // ... 其他答案
  },
  "scoring": {
    "pointsPerQuestion": 2,
    "totalPoints": 100,
    "passingScore": 60
  }
}
```

### 欄位說明

| 欄位 | 類型 | 必填 | 說明 |
|------|------|------|------|
| `name` | String | ✅ | 模板名稱 |
| `totalQuestions` | Number | ✅ | 總題數 |
| `questionsPerRow` | Number | ✅ | 每列題數 |
| `options` | Array | ✅ | 選項陣列 (如 ["A","B","C","D"]) |
| `layout.bubbleRadius` | Number | ✅ | 填塗圓圈半徑（像素） |
| `layout.horizontalSpacing` | Number | ✅ | 水平間距 |
| `layout.verticalSpacing` | Number | ✅ | 垂直間距 |
| `correctAnswers` | Object | ✅ | 正確答案對照表 |
| `scoring.pointsPerQuestion` | Number | ❌ | 每題分數 |
| `scoring.totalPoints` | Number | ❌ | 總分 |

### 測試自訂模板

1. 建立模板 JSON 檔案
2. 放置於 `templates/` 目錄
3. 修改 `app.js` 載入路徑
4. 使用對應格式的答案卡測試

---

## 📊 效能基準測試

以下是在標準環境下的測試結果：

### 測試環境
- CPU: Intel i7-10700
- RAM: 16GB
- 瀏覽器: Chrome 120
- 影像大小: 1500x2000 px (2MB)

### 處理時間

| 步驟 | 時間 |
|------|------|
| 影像載入 | ~100ms |
| 預處理（灰階、降噪、二值化） | ~200ms |
| 角點檢測 | ~150ms |
| 透視校正 | ~100ms |
| 答案辨識 | ~300ms |
| **總計** | **~850ms** |

### 不同解析度對比

| 解析度 | 檔案大小 | 處理時間 | 辨識準確率 |
|--------|----------|----------|------------|
| 800x1066 | 500KB | ~300ms | 92% |
| 1500x2000 | 2MB | ~850ms | 98% |
| 3000x4000 | 8MB | ~3500ms | 99% |

**建議**: 使用 1500x2000 解析度可獲得最佳平衡

---

## ❓ 常見問題

### Q: 為什麼沒有提供實際的影像檔案？

A: 實際的範例影像檔案較大，建議您自行準備測試影像。您可以：
1. 列印提供的模板並填塗
2. 使用手機拍攝或掃描器掃描
3. 參考上述規格建立測試影像

### Q: 可以使用自己的答案卡格式嗎？

A: 可以！請按照「自訂模板指南」建立對應的 JSON 模板檔案。

### Q: 辨識率不佳怎麼辦？

A: 請檢查：
1. 影像品質（解析度、光線、清晰度）
2. 填塗品質（飽滿度、位置準確性）
3. 模板設定（座標、間距是否正確）

---

## 📝 回饋與貢獻

如果您有更好的範例檔案或模板，歡迎：

1. Fork 專案
2. 新增您的範例檔案
3. 提交 Pull Request
4. 在 README 中說明您的貢獻

---

**最後更新**: 2025-10-05
**維護者**: OMR Checker Team
