<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndexedDB Storage æ¸¬è©¦ - OMR Checker</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: #f5f5f5;
        }

        .test-section {
            background: white;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 0.5rem;
        }

        h2 {
            color: #666;
            margin-top: 0;
        }

        .status {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-weight: bold;
        }

        .status.pending {
            background: #FFF3CD;
            color: #856404;
        }

        .status.running {
            background: #D1ECF1;
            color: #0C5460;
        }

        .status.success {
            background: #D4EDDA;
            color: #155724;
        }

        .status.error {
            background: #F8D7DA;
            color: #721C24;
        }

        button {
            padding: 0.75rem 1.5rem;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }

        button:hover {
            background: #45a049;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .log {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .log-entry {
            margin: 0.25rem 0;
            padding: 0.25rem;
        }

        .log-entry.info { color: #0C5460; }
        .log-entry.success { color: #155724; }
        .log-entry.error { color: #721C24; }
        .log-entry.warn { color: #856404; }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .results-table th,
        .results-table td {
            border: 1px solid #ddd;
            padding: 0.5rem;
            text-align: left;
        }

        .results-table th {
            background: #4CAF50;
            color: white;
        }

        .thumbnail {
            max-width: 100px;
            max-height: 100px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª IndexedDB Storage æ¸¬è©¦</h1>

    <!-- æ¸¬è©¦ 1: è³‡æ–™åº«åˆå§‹åŒ– -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 1: è³‡æ–™åº«åˆå§‹åŒ–</h2>
        <div id="test1-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest1()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test1-log" class="log"></div>
    </div>

    <!-- æ¸¬è©¦ 2: å„²å­˜å–®ç­†çµæœ -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 2: å„²å­˜å–®ç­†çµæœ</h2>
        <div id="test2-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest2()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test2-log" class="log"></div>
    </div>

    <!-- æ¸¬è©¦ 3: å„²å­˜ 10 ç­†çµæœä¸¦è®€å– -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 3: å„²å­˜ 10 ç­†çµæœä¸¦è®€å–</h2>
        <div id="test3-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest3()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test3-log" class="log"></div>
        <div id="test3-results"></div>
    </div>

    <!-- æ¸¬è©¦ 4: å½±åƒ Blob å„²å­˜èˆ‡é‚„åŸ -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 4: å½±åƒ Blob å„²å­˜èˆ‡é‚„åŸ</h2>
        <div id="test4-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <input type="file" id="test4-file" accept="image/*">
        <button onclick="runTest4()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test4-log" class="log"></div>
        <div id="test4-results"></div>
    </div>

    <!-- æ¸¬è©¦ 5: åˆªé™¤å–®ç­†è¨˜éŒ„ -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 5: åˆªé™¤å–®ç­†è¨˜éŒ„</h2>
        <div id="test5-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest5()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test5-log" class="log"></div>
    </div>

    <!-- æ¸¬è©¦ 6: åˆªé™¤æ‰€æœ‰è¨˜éŒ„ -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 6: åˆªé™¤æ‰€æœ‰è¨˜éŒ„</h2>
        <div id="test6-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest6()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test6-log" class="log"></div>
    </div>

    <!-- æ¸¬è©¦ 7: æ¨¡æ¿å„²å­˜èˆ‡è®€å– -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 7: æ¨¡æ¿å„²å­˜èˆ‡è®€å–</h2>
        <div id="test7-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest7()">åŸ·è¡Œæ¸¬è©¦</button>
        <div id="test7-log" class="log"></div>
    </div>

    <!-- æ¸¬è©¦ 8: è³‡æ–™æŒä¹…åŒ–æ¸¬è©¦ -->
    <div class="test-section">
        <h2>æ¸¬è©¦ 8: è³‡æ–™æŒä¹…åŒ–æ¸¬è©¦</h2>
        <p>æ­¤æ¸¬è©¦éœ€è¦æ‰‹å‹•åŸ·è¡Œï¼š</p>
        <ol>
            <li>åŸ·è¡Œæ¸¬è©¦ 3 å„²å­˜ 10 ç­†è³‡æ–™</li>
            <li>é—œé–‰ç€è¦½å™¨åˆ†é </li>
            <li>é‡æ–°é–‹å•Ÿæ­¤é é¢</li>
            <li>é»æ“Šã€Œé©—è­‰è³‡æ–™ã€æŒ‰éˆ•</li>
        </ol>
        <div id="test8-status" class="status pending">ç­‰å¾…æ¸¬è©¦</div>
        <button onclick="runTest8()">é©—è­‰è³‡æ–™</button>
        <div id="test8-log" class="log"></div>
    </div>

    <!-- åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ -->
    <div class="test-section">
        <h2>ğŸš€ åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦</h2>
        <button onclick="runAllTests()" style="background: #2196F3;">åŸ·è¡Œå…¨éƒ¨æ¸¬è©¦</button>
        <button onclick="clearAllData()" style="background: #f44336;">æ¸…ç©ºæ‰€æœ‰è³‡æ–™</button>
    </div>

    <script src="../assets/js/storage.js"></script>
    <script>
        // æ¸¬è©¦å·¥å…·å‡½æ•¸
        function log(testId, message, type = 'info') {
            const logDiv = document.getElementById(`${testId}-log`);
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function setStatus(testId, status, message) {
            const statusDiv = document.getElementById(`${testId}-status`);
            statusDiv.className = `status ${status}`;
            statusDiv.textContent = message;
        }

        // å»ºç«‹æ¸¬è©¦ç”¨å½±åƒ Blob
        function createTestImageBlob() {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                canvas.width = 200;
                canvas.height = 200;
                const ctx = canvas.getContext('2d');

                // ç¹ªè£½ç°¡å–®åœ–æ¡ˆ
                ctx.fillStyle = '#4CAF50';
                ctx.fillRect(0, 0, 200, 200);
                ctx.fillStyle = 'white';
                ctx.font = '40px Arial';
                ctx.fillText('TEST', 50, 100);

                canvas.toBlob(resolve, 'image/png');
            });
        }

        // æ¸¬è©¦ 1: è³‡æ–™åº«åˆå§‹åŒ–
        async function runTest1() {
            const testId = 'test1';
            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦è³‡æ–™åº«åˆå§‹åŒ–', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                log(testId, 'âœ“ è³‡æ–™åº«åˆå§‹åŒ–æˆåŠŸ', 'success');
                log(testId, `è³‡æ–™åº«åç¨±: ${storage.DB_NAME}`, 'info');
                log(testId, `è³‡æ–™åº«ç‰ˆæœ¬: ${storage.DB_VERSION}`, 'info');

                setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 2: å„²å­˜å–®ç­†çµæœ
        async function runTest2() {
            const testId = 'test2';
            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦å„²å­˜å–®ç­†çµæœ', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                const imageBlob = await createTestImageBlob();

                const testResult = {
                    originalImageBlob: imageBlob,
                    processedImageBlob: imageBlob,
                    answers: { 1: 'A', 2: 'B', 3: 'C' },
                    score: 85,
                    templateName: 'default',
                    metadata: { testName: 'Test 2' }
                };

                log(testId, 'å»ºç«‹æ¸¬è©¦è³‡æ–™...', 'info');
                const id = await storage.saveResult(testResult);

                log(testId, `âœ“ å„²å­˜æˆåŠŸï¼ŒID: ${id}`, 'success');

                // è®€å–å‰›å„²å­˜çš„è³‡æ–™
                const saved = await storage.getResultById(id);
                log(testId, `âœ“ è®€å–æˆåŠŸ`, 'success');
                log(testId, `åˆ†æ•¸: ${saved.score}`, 'info');
                log(testId, `æ¨¡æ¿: ${saved.templateName}`, 'info');

                setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 3: å„²å­˜ 10 ç­†çµæœä¸¦è®€å–
        async function runTest3() {
            const testId = 'test3';
            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦å„²å­˜ 10 ç­†çµæœ', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                const imageBlob = await createTestImageBlob();

                // å„²å­˜ 10 ç­†è³‡æ–™
                for (let i = 1; i <= 10; i++) {
                    const testResult = {
                        originalImageBlob: imageBlob,
                        processedImageBlob: imageBlob,
                        answers: { 1: 'A', 2: 'B', 3: 'C', 4: 'D' },
                        score: 70 + i,
                        templateName: 'default',
                        metadata: { testNumber: i }
                    };

                    await storage.saveResult(testResult);
                    log(testId, `âœ“ å„²å­˜ç¬¬ ${i} ç­†è³‡æ–™`, 'success');
                }

                // è®€å–æ‰€æœ‰è³‡æ–™
                const allResults = await storage.getAllResults();
                log(testId, `âœ“ è®€å–åˆ° ${allResults.length} ç­†è³‡æ–™`, 'success');

                // é¡¯ç¤ºçµæœè¡¨æ ¼
                const resultsDiv = document.getElementById(`${testId}-results`);
                let html = '<table class="results-table"><tr><th>ID</th><th>æ™‚é–“</th><th>åˆ†æ•¸</th><th>æ¨¡æ¿</th></tr>';
                allResults.forEach(result => {
                    html += `<tr>
                        <td>${result.id}</td>
                        <td>${new Date(result.timestamp).toLocaleString()}</td>
                        <td>${result.score}</td>
                        <td>${result.templateName}</td>
                    </tr>`;
                });
                html += '</table>';
                resultsDiv.innerHTML = html;

                setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 4: å½±åƒ Blob å„²å­˜èˆ‡é‚„åŸ
        async function runTest4() {
            const testId = 'test4';
            const fileInput = document.getElementById('test4-file');

            if (!fileInput.files[0]) {
                alert('è«‹å…ˆé¸æ“‡ä¸€å¼µåœ–ç‰‡');
                return;
            }

            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦å½±åƒ Blob å„²å­˜èˆ‡é‚„åŸ', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                const file = fileInput.files[0];
                const imageBlob = new Blob([await file.arrayBuffer()], { type: file.type });

                log(testId, `åœ–ç‰‡å¤§å°: ${(imageBlob.size / 1024).toFixed(2)} KB`, 'info');

                const testResult = {
                    originalImageBlob: imageBlob,
                    processedImageBlob: imageBlob,
                    answers: { 1: 'A' },
                    score: 100,
                    templateName: 'test',
                    metadata: { fileName: file.name }
                };

                const id = await storage.saveResult(testResult);
                log(testId, `âœ“ å„²å­˜æˆåŠŸï¼ŒID: ${id}`, 'success');

                // è®€å–ä¸¦é¡¯ç¤ºåœ–ç‰‡
                const saved = await storage.getResultById(id);
                const url = URL.createObjectURL(saved.originalImageBlob);

                const resultsDiv = document.getElementById(`${testId}-results`);
                resultsDiv.innerHTML = `
                    <h3>åŸå§‹åœ–ç‰‡:</h3>
                    <img src="${url}" class="thumbnail" onload="URL.revokeObjectURL(this.src)">
                    <p>æª”æ¡ˆåç¨±: ${saved.metadata.fileName}</p>
                `;

                log(testId, 'âœ“ åœ–ç‰‡é‚„åŸæˆåŠŸ', 'success');
                setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 5: åˆªé™¤å–®ç­†è¨˜éŒ„
        async function runTest5() {
            const testId = 'test5';
            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦åˆªé™¤å–®ç­†è¨˜éŒ„', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                // å…ˆå»ºç«‹ä¸€ç­†è³‡æ–™
                const imageBlob = await createTestImageBlob();
                const testResult = {
                    originalImageBlob: imageBlob,
                    processedImageBlob: imageBlob,
                    answers: { 1: 'A' },
                    score: 90,
                    templateName: 'test',
                    metadata: {}
                };

                const id = await storage.saveResult(testResult);
                log(testId, `âœ“ å»ºç«‹æ¸¬è©¦è³‡æ–™ï¼ŒID: ${id}`, 'success');

                // åˆªé™¤è³‡æ–™
                await storage.deleteResult(id);
                log(testId, `âœ“ åˆªé™¤æˆåŠŸ`, 'success');

                // é©—è­‰å·²åˆªé™¤
                const deleted = await storage.getResultById(id);
                if (deleted === undefined) {
                    log(testId, 'âœ“ ç¢ºèªè³‡æ–™å·²åˆªé™¤', 'success');
                    setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
                } else {
                    throw new Error('è³‡æ–™æœªæ­£ç¢ºåˆªé™¤');
                }
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 6: åˆªé™¤æ‰€æœ‰è¨˜éŒ„
        async function runTest6() {
            const testId = 'test6';
            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦åˆªé™¤æ‰€æœ‰è¨˜éŒ„', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                // å…ˆå»ºç«‹å¹¾ç­†è³‡æ–™
                const imageBlob = await createTestImageBlob();
                for (let i = 0; i < 3; i++) {
                    await storage.saveResult({
                        originalImageBlob: imageBlob,
                        processedImageBlob: imageBlob,
                        answers: {},
                        score: i * 10,
                        templateName: 'test',
                        metadata: {}
                    });
                }
                log(testId, 'âœ“ å»ºç«‹ 3 ç­†æ¸¬è©¦è³‡æ–™', 'success');

                // åˆªé™¤æ‰€æœ‰è³‡æ–™
                await storage.deleteAllResults();
                log(testId, 'âœ“ åˆªé™¤æ‰€æœ‰è³‡æ–™', 'success');

                // é©—è­‰
                const allResults = await storage.getAllResults();
                if (allResults.length === 0) {
                    log(testId, 'âœ“ ç¢ºèªæ‰€æœ‰è³‡æ–™å·²æ¸…ç©º', 'success');
                    setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
                } else {
                    throw new Error(`ä»æœ‰ ${allResults.length} ç­†è³‡æ–™æœªåˆªé™¤`);
                }
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 7: æ¨¡æ¿å„²å­˜èˆ‡è®€å–
        async function runTest7() {
            const testId = 'test7';
            setStatus(testId, 'running', 'æ¸¬è©¦é€²è¡Œä¸­...');
            log(testId, 'é–‹å§‹æ¸¬è©¦æ¨¡æ¿å„²å­˜èˆ‡è®€å–', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                const testTemplate = {
                    name: 'custom-test',
                    config: {
                        questions: 20,
                        options: ['A', 'B', 'C', 'D'],
                        layout: 'vertical'
                    },
                    createdAt: new Date()
                };

                await storage.saveTemplate(testTemplate);
                log(testId, `âœ“ å„²å­˜æ¨¡æ¿: ${testTemplate.name}`, 'success');

                const saved = await storage.getTemplate(testTemplate.name);
                log(testId, `âœ“ è®€å–æ¨¡æ¿æˆåŠŸ`, 'success');
                log(testId, `å•é¡Œæ•¸: ${saved.config.questions}`, 'info');
                log(testId, `é¸é …: ${saved.config.options.join(', ')}`, 'info');

                setStatus(testId, 'success', 'âœ“ æ¸¬è©¦é€šé');
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // æ¸¬è©¦ 8: è³‡æ–™æŒä¹…åŒ–é©—è­‰
        async function runTest8() {
            const testId = 'test8';
            setStatus(testId, 'running', 'é©—è­‰ä¸­...');
            log(testId, 'é–‹å§‹é©—è­‰è³‡æ–™æŒä¹…åŒ–', 'info');

            try {
                const storage = new OMRStorage();
                await storage.init();

                const allResults = await storage.getAllResults();

                if (allResults.length > 0) {
                    log(testId, `âœ“ æ‰¾åˆ° ${allResults.length} ç­†æŒä¹…åŒ–è³‡æ–™`, 'success');

                    allResults.forEach((result, index) => {
                        log(testId, `è¨˜éŒ„ ${index + 1}: åˆ†æ•¸=${result.score}, æ™‚é–“=${new Date(result.timestamp).toLocaleString()}`, 'info');
                    });

                    setStatus(testId, 'success', 'âœ“ è³‡æ–™æŒä¹…åŒ–æ¸¬è©¦é€šé');
                } else {
                    log(testId, 'âš  æœªæ‰¾åˆ°æŒä¹…åŒ–è³‡æ–™', 'warn');
                    log(testId, 'è«‹å…ˆåŸ·è¡Œæ¸¬è©¦ 3 ä¸¦é‡æ–°è¼‰å…¥é é¢', 'warn');
                    setStatus(testId, 'pending', 'ç­‰å¾…æ¸¬è©¦');
                }
            } catch (error) {
                log(testId, `âœ— éŒ¯èª¤: ${error.message}`, 'error');
                setStatus(testId, 'error', 'âœ— æ¸¬è©¦å¤±æ•—');
            }
        }

        // åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
        async function runAllTests() {
            console.log('ğŸš€ é–‹å§‹åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦');

            await runTest1();
            await new Promise(resolve => setTimeout(resolve, 500));

            await runTest2();
            await new Promise(resolve => setTimeout(resolve, 500));

            await runTest3();
            await new Promise(resolve => setTimeout(resolve, 500));

            await runTest5();
            await new Promise(resolve => setTimeout(resolve, 500));

            await runTest6();
            await new Promise(resolve => setTimeout(resolve, 500));

            await runTest7();

            console.log('âœ… æ‰€æœ‰æ¸¬è©¦åŸ·è¡Œå®Œæˆ');
            alert('æ‰€æœ‰æ¸¬è©¦åŸ·è¡Œå®Œæˆï¼è«‹æª¢æŸ¥çµæœã€‚');
        }

        // æ¸…ç©ºæ‰€æœ‰è³‡æ–™
        async function clearAllData() {
            if (!confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å„²å­˜çš„è³‡æ–™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚')) {
                return;
            }

            try {
                const storage = new OMRStorage();
                await storage.init();
                await storage.deleteAllResults();
                alert('âœ“ æ‰€æœ‰è³‡æ–™å·²æ¸…ç©º');
                window.location.reload();
            } catch (error) {
                alert('âœ— æ¸…ç©ºå¤±æ•—: ' + error.message);
            }
        }
    </script>
</body>
</html>
